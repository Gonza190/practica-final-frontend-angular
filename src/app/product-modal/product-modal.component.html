<div>
  <button
    class="bg-slate-200 hover:bg-slate-400 p-2 my-2 flex rounded-xl items-center mr-2"
    (click)="openModal()"
  >
    <p class="px-2">Agregar Producto</p>
    <i class="fas fa-plus p-1"></i>
  </button>

  <div
    *ngIf="modalOpen"
    class="fixed inset-0 z-10 overflow-y-auto flex justify-center items-center bg-black bg-opacity-60"
  >
    <div class="bg-white p-6 rounded-lg shadow-xl">
      <div class="flex justify-between items-center">
        <h1 class="text-2xl text-gray-700 font-semibold pr-5">
          Agregar producto
        </h1>
        <button
          (click)="closeModal()"
          class="text-gray-600 hover:text-gray-800"
        ></button>
      </div>
      <div>
        <button
          class="bg-slate-200 hover:bg-slate-400 p-2 my-2 flex rounded-xl items-center mr-2"
          (click)="openModal()"
        >
          <p class="px-2">Agregar Producto</p>
        </button>

        <div
          *ngIf="modalOpen"
          class="fixed inset-0 z-10 overflow-y-auto flex justify-center items-center bg-black bg-opacity-60"
        >
          <div class="bg-white p-6 rounded-lg shadow-xl">
            <div class="flex justify-between items-center">
              <h1 class="text-2xl text-gray-700 font-semibold pr-5">
                Agregar producto
              </h1>
              <button
                (click)="closeModal()"
                class="text-gray-600 hover:text-gray-800"
              >
                <svg
                  class="h-6 w-6"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth="2"
                    d="M6 18L18 6M6 6l12 12"
                  />
                </svg>
              </button>
            </div>
            <div class="mt-4">
              <form (submit)="handleSubmit($event)">
                <div class="mb-4">
                  <div class="my-3">
                    <label class="block text-gray-700 text-sm font-medium mb-2">
                      Nombre del disco
                    </label>
                    <input
                      type="text"
                      [(ngModel)]="productName"
                      class="border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      required
                    />
                  </div>
                  <div class="my-3">
                    <label class="block text-gray-700 text-sm font-medium mb-2">
                      Artista
                    </label>
                    <input
                      type="text"
                      [(ngModel)]="artist"
                      class="border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      required
                    />
                  </div>
                  <div class="my-3">
                    <label class="block text-gray-700 text-sm font-medium mb-2">
                      Categoría
                    </label>
                    <select
                      [(ngModel)]="selectedCategory"
                      class="border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                    >
                      <option
                        *ngFor="let category of categories"
                        [value]="category.nombre"
                      >
                        {{ category.nombre }}
                      </option>
                    </select>
                  </div>
                  <div class="my-3">
                    <label class="block text-gray-700 text-sm font-medium mb-2">
                      Precio (€)
                    </label>
                    <input
                      type="number"
                      step="0.01"
                      min="0"
                      [(ngModel)]="price"
                      class="border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      required
                    />
                  </div>
                  <div class="my-3">
                    <label class="block text-gray-700 text-sm font-medium mb-2">
                      Stock (uds.)
                    </label>
                    <input
                      type="number"
                      min="0"
                      max="99"
                      [(ngModel)]="stock"
                      class="border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      required
                    />
                  </div>
                  <div class="my-3">
                    <label class="block text-gray-700 text-sm font-medium mb-2">
                      Portada
                    </label>
                    <input
                      accept="image/*"
                      type="file"
                      (change)="handleImageChange($event)"
                      class="border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      required
                    />
                    <img
                      *ngIf="imageUrl"
                      [src]="imageUrl"
                      alt="Product"
                      class="mt-2 max-h-40"
                    />
                  </div>
                </div>

                <button
                  type="submit"
                  class="bg-slate-200 hover:bg-slate-400 p-2 my-2 flex rounded-xl items-center mr-2"
                >
                  Añadir
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
